{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\poc\\\\demoreact\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport logo from \"./logo.svg\";\nimport React, { useState, useEffect } from \"react\";\nimport * as druid from '@saehrimnir/druidjs';\nimport MyCSVReader from './components/CsvReader.js';\nimport DimensionsList from './components/DimList.js';\nimport DimensionsListRedux from './components/DimList2.js';\nimport ScatterPlotDiv from './components/ScatterPlotDiv';\nimport ScatterPlotMatrixDiv from './components/ScatterPlotMatrixDiv';\n/*-----------FUNZIONI UTILI---------------\r\n\r\n--Filtra un array per un valore e restituisce un array con tutti i valori che preferisco--\r\nconst checkedDims = dims.filter(dim => dim.isChecked).map((d) => d.value);\r\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [data, setData] = useState([]); //array di oggetti {dim1: numeric, dim2: \"string\"}\n\n  const [dims, setDims] = useState([]); //array di oggetti  {value: \"string\", isChecked: bool, isNumeric: bool, isRedux: bool}\n\n  const [uData, setUData] = useState([]); //array di oggetti {dim1: numeric, dim2: \"string\"} con solo le dim selezionate\n\n  const [nCNRDims, setNCNRDims] = useState(0); //numero di dimensioni selezionate e non ridotte\n\n  const [drAlgo, setDrAlgo] = useState(\"FASTMAP\");\n  const [neighbors, setNeighbors] = useState(30);\n  const [test, setTest] = useState(false);\n  const [test2, setTest2] = useState(false);\n  const [newDimName, setNewDimName] = useState(\"FASTMAP\");\n  const [nNewDim, setNNewDim] = useState(2);\n  useEffect(() => {\n    setTest(false);\n    setTest2(false);\n  }, [dims]);\n  useEffect(() => {\n    syncDimsData();\n  }, [nCNRDims]);\n\n  function handleDataLoad(newData, newColumns) {\n    setTest(false);\n    setTest2(false); //se viene richiamato il metodo quando si elimina il file\n\n    if (newData == null) {\n      setDims([]);\n      setData([]);\n      setUData([]);\n      return;\n    }\n\n    setData(newData);\n    setDims(newColumns);\n    setNCNRDims(newColumns.filter(d => d.isChecked && !d.isRedux).length);\n  }\n\n  function haveNanValue(d) {\n    const numeric_checkedDims = dims.filter(dim => dim.isChecked && dim.isNumeric && !dim.isRedux).map(d => d.value);\n    let not_nan = true;\n    numeric_checkedDims.forEach(dim => {\n      if (isNaN(d[dim])) {\n        not_nan = false;\n        return;\n      }\n    });\n    return not_nan;\n  }\n\n  function syncDimsData() {\n    const checkedDims = dims.filter(dim => dim.isChecked && !dim.isRedux).map(d => d.value); //array con i nomi delle dimensioni checked\n\n    let aux = data.map(d => {\n      //con filter tolgo i dati che hanno alcune dimensioni numeriche selezionate NaN; e con map prendo le dimensioni selezionate\n      return Object.fromEntries(checkedDims.map(dim => [dim, d[dim]]));\n    }).filter(haveNanValue);\n    setUData(aux);\n    const removedReduxDims = dims.filter(dim => !dim.isRedux);\n    setDims(removedReduxDims);\n  }\n\n  function handleChangeDims(newDims) {\n    setDims(newDims);\n    setNCNRDims(newDims.filter(d => d.isChecked && !d.isRedux).length);\n  }\n\n  function showGraph() {\n    setTest(true);\n    setTest2(false);\n  }\n\n  function showGraph2() {\n    setTest2(true);\n    setTest(false);\n  }\n\n  function reduxDims() {\n    //Array con dimensioni numeriche e selezionate e da ridurre\n    const numericDims = dims.filter(dim => dim.isNumeric && dim.isChecked && dim.toRedux).map(d => d.value); //Dati con dimensioni numeriche e selezionate e da ridurre\n\n    const sendedData = uData.map(obj => {\n      return Array.from(numericDims.map(dim => obj[dim]));\n    });\n\n    function dr() {\n      // Matrice con i dati delle dimensioni da ridurre\n      const X = druid.Matrix.from(sendedData); // DR Ã© l'algoritmo scelto dall'utente\n\n      const DR = druid[drAlgo]; //costruisco l'oggetto di riduzione dimensionale\n\n      switch (drAlgo) {\n        case \"FASTMAP\":\n        case \"TSNE\":\n          return new DR(X, nNewDim);\n\n        default:\n          return new DR(X, nNewDim, neighbors);\n      }\n    }\n\n    let redux = dr();\n    const Y = redux.transform(); //Con transform applico la riduzione\n    //Aggiorno l'array delle dimensioni con le dimensioni ridotte\n    //Aggiorno l'array dei dati con i dati ricevuti dalla riduzione\n\n    let reduxDims = []; //Nuove dimensioni ridotte\n\n    for (let i = 1; i <= Y._cols; i++) {\n      reduxDims.push({\n        \"value\": newDimName + i,\n        \"isChecked\": true,\n        \"toRedux\": true,\n        \"isNumeric\": true,\n        \"isRedux\": true\n      });\n    }\n\n    let tempdims = [...dims].filter(d => !d.value.includes(newDimName));\n    let tempdata = uData.map(d => {\n      return Object.fromEntries(tempdims.map(dim => [dim.value, d[dim.value]]));\n    });\n    tempdims = tempdims.concat(reduxDims); //aggiungo ad ogni dato i nuovi valori delle nuove dimensioni\n\n    for (let i = 0; i < tempdata.length; i++) {\n      let data = tempdata[i];\n      let j = 0;\n      reduxDims.forEach(dim => {\n        data[dim.value] = Y.to2dArray[i][j];\n        j++;\n      });\n    } //aggiorno udata e dims con le nuove dimensioni e dati\n\n\n    setUData(tempdata);\n    setDims(tempdims);\n    alert(\"Riduzione effettuata con successo\");\n  }\n\n  function renderParams() {\n    switch (drAlgo) {\n      case \"FASTMAP\":\n      case \"TSNE\":\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Nessun parametro configurabile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 16\n        }, this);\n\n      case \"ISOMAP\":\n        return /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"k\",\n            type: \"range\",\n            min: 10,\n            max: 300,\n            value: neighbors,\n            onChange: changeNeighbours\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 23\n          }, this), \" neighbors \", /*#__PURE__*/_jsxDEV(\"i\", {\n            children: \"k\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 129\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: neighbors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 137\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 16\n        }, this);\n\n      case \"LLE\":\n        return /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"k\",\n            type: \"range\",\n            min: 10,\n            max: 300,\n            value: neighbors,\n            onChange: changeNeighbours\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 23\n          }, this), \" neighbors \", /*#__PURE__*/_jsxDEV(\"i\", {\n            children: \"k\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 129\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: neighbors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 137\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 16\n        }, this);\n\n      default:\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Nulla configurabile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 16\n        }, this);\n    }\n  }\n\n  function changeNeighbours(e) {\n    setTest(false);\n    setTest2(false);\n    setNeighbors(e.target.value);\n  }\n\n  function changeAlgo(e) {\n    setTest(false);\n    setTest2(false);\n    setNewDimName(e.target.value);\n    setDrAlgo(e.target.value);\n  }\n\n  function changeNewDimName(e) {\n    setTest(false);\n    setTest2(false);\n    setNewDimName(e.target.value);\n  }\n\n  function changeNNewDim(e) {\n    setTest(false);\n    setTest2(false);\n    setNNewDim(e.target.value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        className: \"App-logo\",\n        alt: \"logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"App-title\",\n        children: \"PoC HDviz\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-inline-flex m-3 justify-content-around w-75\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(MyCSVReader, {\n            onChange: handleDataLoad\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary m-2\",\n            onClick: () => {\n              console.log(\"Carica dati dal db\");\n            },\n            children: \"Carica dati dal db\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-column\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary m-2\",\n            onClick: () => {\n              console.log(\"Import Configurazione\");\n            },\n            children: \"Import Configurazione\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary m-2\",\n            onClick: () => {\n              console.log(\"Export Configurazione\");\n            },\n            children: \"Export Configurazione\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-inline-flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary m-2\",\n          onClick: () => {\n            console.log(data);\n          },\n          children: \"Log Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary m-2\",\n          onClick: () => {\n            console.log(dims);\n          },\n          children: \"Log Dimension\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary m-2\",\n          onClick: () => {\n            console.log(uData);\n          },\n          children: \"Log Used Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-75 mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Selenziona le dimensioni che desideri utilizzare\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DimensionsList, {\n          dims: dims,\n          updateDims: handleChangeDims\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Riduzione dimensionale\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-75 mx-auto d-flex justify-content-between align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(DimensionsListRedux, {\n          dims: dims,\n          updateDims: handleChangeDims\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"algRedux\",\n          value: drAlgo,\n          className: \"form-select\",\n          onChange: changeAlgo,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"FASTMAP\",\n            children: \"FASTMAP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"LLE\",\n            children: \"LLE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"ISOMAP\",\n            children: \"ISOMAP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"TSNE\",\n            children: \"TSNE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-column\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            forhtml: \"dimName\",\n            children: \"Nome della/e nuove dimensioni\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"dimName\",\n            type: \"text\",\n            onChange: changeNewDimName,\n            value: newDimName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            forhtml: \"nNewDim\",\n            children: \"Dimensioni di ritorno\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"nNewDim\",\n            type: \"number\",\n            onChange: changeNNewDim,\n            value: nNewDim\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), renderParams()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary m-2\",\n          onClick: reduxDims,\n          children: \"Redux Dims\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-inline-flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary m-2\",\n          onClick: showGraph,\n          children: \"Scatter Plot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary m-2\",\n          onClick: showGraph2,\n          children: \"Scatter Plot Matrix\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), test ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-75 mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(ScatterPlotDiv, {\n          data: uData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 44\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 14\n      }, this) : null, test2 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-75 mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(ScatterPlotMatrixDiv, {\n          data: uData,\n          dims: dims\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 44\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 14\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"hpLoM/iDuQCmNuuP6AF0JPgbe0I=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Admin/Desktop/poc/demoreact/src/App.js"],"names":["React","useState","useEffect","druid","MyCSVReader","DimensionsList","DimensionsListRedux","ScatterPlotDiv","ScatterPlotMatrixDiv","App","data","setData","dims","setDims","uData","setUData","nCNRDims","setNCNRDims","drAlgo","setDrAlgo","neighbors","setNeighbors","test","setTest","test2","setTest2","newDimName","setNewDimName","nNewDim","setNNewDim","syncDimsData","handleDataLoad","newData","newColumns","filter","d","isChecked","isRedux","length","haveNanValue","numeric_checkedDims","dim","isNumeric","map","value","not_nan","forEach","isNaN","checkedDims","aux","Object","fromEntries","removedReduxDims","handleChangeDims","newDims","showGraph","showGraph2","reduxDims","numericDims","toRedux","sendedData","obj","Array","from","dr","X","Matrix","DR","redux","Y","transform","i","_cols","push","tempdims","includes","tempdata","concat","j","to2dArray","alert","renderParams","changeNeighbours","e","target","changeAlgo","changeNewDimName","changeNNewDim","logo","console","log"],"mappings":"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","sourcesContent":["import './App.css';\r\nimport logo from './logo.svg';\r\nimport React, {useState, useEffect} from \"react\";\r\nimport * as druid from '@saehrimnir/druidjs';\r\nimport MyCSVReader from './components/CsvReader.js';\r\nimport DimensionsList from './components/DimList.js';\r\nimport DimensionsListRedux from './components/DimList2.js';\r\nimport ScatterPlotDiv from './components/ScatterPlotDiv';\r\nimport ScatterPlotMatrixDiv from './components/ScatterPlotMatrixDiv';\r\n\r\n/*-----------FUNZIONI UTILI---------------\r\n\r\n--Filtra un array per un valore e restituisce un array con tutti i valori che preferisco--\r\nconst checkedDims = dims.filter(dim => dim.isChecked).map((d) => d.value);\r\n*/\r\n\r\nfunction App() {\r\n  const [data, setData] = useState([]); //array di oggetti {dim1: numeric, dim2: \"string\"}\r\n  const [dims, setDims] = useState([]); //array di oggetti  {value: \"string\", isChecked: bool, isNumeric: bool, isRedux: bool}\r\n  const [uData, setUData] = useState([]); //array di oggetti {dim1: numeric, dim2: \"string\"} con solo le dim selezionate\r\n  const [nCNRDims, setNCNRDims] = useState(0);  //numero di dimensioni selezionate e non ridotte\r\n  const [drAlgo, setDrAlgo] = useState(\"FASTMAP\");\r\n  const [neighbors, setNeighbors] = useState(30);\r\n  const [test, setTest] = useState(false);\r\n  const [test2, setTest2] = useState(false);\r\n  const [newDimName, setNewDimName] = useState(\"FASTMAP\");\r\n  const [nNewDim, setNNewDim] = useState(2);\r\n  useEffect(() => {\r\n    setTest(false);\r\n    setTest2(false);\r\n  }, [dims]);\r\n\r\n  useEffect(() => {\r\n    syncDimsData();\r\n  }, [nCNRDims])\r\n\r\n  function handleDataLoad(newData, newColumns){\r\n    setTest(false);\r\n    setTest2(false);\r\n    //se viene richiamato il metodo quando si elimina il file\r\n    if(newData == null){\r\n      setDims([]);\r\n      setData([]);\r\n      setUData([]);\r\n      return;\r\n    }\r\n    setData(newData);\r\n    setDims(newColumns);\r\n    setNCNRDims(newColumns.filter(d => d.isChecked && !d.isRedux).length);\r\n  }\r\n  function haveNanValue(d){\r\n    const numeric_checkedDims = dims.filter(dim => dim.isChecked && dim.isNumeric && !dim.isRedux).map((d) => d.value);\r\n    let not_nan = true;\r\n    numeric_checkedDims.forEach(dim => {\r\n      if(isNaN(d[dim])){\r\n        not_nan = false;\r\n        return;\r\n      }\r\n    }); \r\n    return not_nan;\r\n  }\r\n  function syncDimsData(){\r\n    const checkedDims = dims.filter(dim => dim.isChecked && !dim.isRedux).map((d) => d.value);  //array con i nomi delle dimensioni checked\r\n    let aux = data.map(d => {    //con filter tolgo i dati che hanno alcune dimensioni numeriche selezionate NaN; e con map prendo le dimensioni selezionate\r\n        return Object.fromEntries(checkedDims.map(dim => [dim, d[dim]]))\r\n     }).filter(haveNanValue);\r\n    setUData(aux);\r\n    const removedReduxDims = dims.filter(dim => !dim.isRedux);\r\n    setDims(removedReduxDims);\r\n  }\r\n  function handleChangeDims(newDims){\r\n    setDims(newDims);\r\n    setNCNRDims(newDims.filter(d => d.isChecked && !d.isRedux).length);\r\n  }\r\n  function showGraph(){\r\n    setTest(true);\r\n    setTest2(false);\r\n  }\r\n  function showGraph2(){\r\n    setTest2(true);\r\n    setTest(false);\r\n  }\r\n  function reduxDims(){\r\n    //Array con dimensioni numeriche e selezionate e da ridurre\r\n    const numericDims = dims.filter(dim => dim.isNumeric && dim.isChecked && dim.toRedux).map((d) => d.value);\r\n    //Dati con dimensioni numeriche e selezionate e da ridurre\r\n    const sendedData = uData.map(obj => {\r\n      return Array.from(numericDims.map((dim) => obj[dim]))\r\n    });\r\n    function dr(){\r\n      // Matrice con i dati delle dimensioni da ridurre\r\n      const X = druid.Matrix.from(sendedData); \r\n      // DR Ã© l'algoritmo scelto dall'utente\r\n      const DR = druid[drAlgo]; \r\n      //costruisco l'oggetto di riduzione dimensionale\r\n      switch(drAlgo){\r\n        case \"FASTMAP\":\r\n        case \"TSNE\":\r\n          return new DR(X, nNewDim);\r\n        default:\r\n          return new DR(X, nNewDim, neighbors);\r\n      }\r\n    }\r\n    let redux = dr();\r\n    const Y = redux.transform()  //Con transform applico la riduzione\r\n    //Aggiorno l'array delle dimensioni con le dimensioni ridotte\r\n    //Aggiorno l'array dei dati con i dati ricevuti dalla riduzione\r\n    \r\n    let reduxDims = [];//Nuove dimensioni ridotte\r\n    for (let i = 1; i <= Y._cols; i++) {\r\n      reduxDims.push({\"value\": (newDimName+i), \"isChecked\": true, \"toRedux\": true,\"isNumeric\": true, \"isRedux\" : true});\r\n    }\r\n    let tempdims=[...dims].filter(d => !d.value.includes(newDimName));\r\n\r\n    let tempdata = uData.map((d) =>{\r\n      return Object.fromEntries(tempdims.map((dim => [dim.value, d[dim.value]])))\r\n    });\r\n    tempdims = tempdims.concat(reduxDims);\r\n    //aggiungo ad ogni dato i nuovi valori delle nuove dimensioni\r\n    for(let i = 0; i<tempdata.length; i++){\r\n      let data = tempdata[i];\r\n      let j=0;\r\n      reduxDims.forEach(dim => {\r\n        data[dim.value] = Y.to2dArray[i][j]\r\n        j++\r\n      });\r\n    }\r\n    //aggiorno udata e dims con le nuove dimensioni e dati\r\n    setUData(tempdata);\r\n    setDims(tempdims);\r\n    alert(\"Riduzione effettuata con successo\")\r\n  }\r\n  function renderParams(){\r\n    switch (drAlgo) {\r\n      case \"FASTMAP\":\r\n      case \"TSNE\":\r\n        return <span>Nessun parametro configurabile</span>;\r\n      case \"ISOMAP\":\r\n        return <label><input name=\"k\" type=\"range\" min={10} max={300} value={neighbors} onChange={changeNeighbours}/> neighbors <i>k</i><p>{neighbors}</p></label>;\r\n      case \"LLE\":\r\n        return <label><input name=\"k\" type=\"range\" min={10} max={300} value={neighbors} onChange={changeNeighbours}/> neighbors <i>k</i><p>{neighbors}</p></label>;\r\n      default:\r\n        return <span>Nulla configurabile</span>;\r\n    }\r\n  }\r\n  function changeNeighbours(e){\r\n    setTest(false);\r\n    setTest2(false);\r\n    setNeighbors(e.target.value);\r\n  }\r\n  function changeAlgo(e){\r\n    setTest(false);\r\n    setTest2(false);\r\n    setNewDimName(e.target.value)\r\n    setDrAlgo(e.target.value)\r\n  }\r\n  function changeNewDimName(e){\r\n    setTest(false);\r\n    setTest2(false);\r\n    setNewDimName(e.target.value)\r\n  }\r\n  function changeNNewDim(e){\r\n    setTest(false);\r\n    setTest2(false);\r\n    setNNewDim(e.target.value)\r\n  }\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <img src={logo} className=\"App-logo\" alt=\"logo\"/>\r\n        <h1 className=\"App-title\" >PoC HDviz</h1>\r\n      </header>\r\n      <div>\r\n        <div className=\"d-inline-flex m-3 justify-content-around w-75\">\r\n          <div>\r\n            <MyCSVReader onChange={handleDataLoad}></MyCSVReader>\r\n          </div>\r\n          <div>\r\n            <button className=\"btn btn-primary m-2\" onClick={() =>{console.log(\"Carica dati dal db\")}}>Carica dati dal db</button>\r\n          </div>\r\n          <div className=\"d-flex flex-column\">\r\n            <button className=\"btn btn-primary m-2\" onClick={() =>{console.log(\"Import Configurazione\")}}>Import Configurazione</button>\r\n            <button className=\"btn btn-primary m-2\" onClick={() =>{console.log(\"Export Configurazione\")}}>Export Configurazione</button>\r\n          </div>\r\n        </div>\r\n        <hr/>\r\n        <div className=\"d-inline-flex\">\r\n          <button className=\"btn btn-primary m-2\" onClick={() =>{console.log(data)}}>Log Data</button>\r\n          <button className=\"btn btn-primary m-2\" onClick={() =>{console.log(dims)}}>Log Dimension</button>\r\n          <button className=\"btn btn-primary m-2\" onClick={() =>{console.log(uData)}}>Log Used Data</button>\r\n        </div>\r\n        <hr/>\r\n        <div className=\"w-75 mx-auto\">\r\n          <h4>Selenziona le dimensioni che desideri utilizzare</h4>\r\n          <DimensionsList dims={dims} updateDims={handleChangeDims}/>\r\n        </div>\r\n        <hr/>\r\n        <h2>Riduzione dimensionale</h2>\r\n        <div className=\"w-75 mx-auto d-flex justify-content-between align-items-center\">\r\n          <DimensionsListRedux dims={dims} updateDims={handleChangeDims}/>\r\n          <select id=\"algRedux\" value={drAlgo} className=\"form-select\" onChange={changeAlgo}>\r\n            <option value={\"FASTMAP\"}>FASTMAP</option>\r\n            <option value={\"LLE\"}>LLE</option>\r\n            <option value={\"ISOMAP\"}>ISOMAP</option>\r\n            <option value={\"TSNE\"}>TSNE</option>\r\n          </select>\r\n          <div className=\"d-flex flex-column\">\r\n            <label forhtml=\"dimName\">Nome della/e nuove dimensioni</label>\r\n            <input id=\"dimName\" type=\"text\" onChange={changeNewDimName} value={newDimName}></input>\r\n            <label forhtml=\"nNewDim\">Dimensioni di ritorno</label>\r\n            <input id=\"nNewDim\" type=\"number\" onChange={changeNNewDim} value={nNewDim}></input>\r\n            <br/>\r\n            {\r\n            renderParams()\r\n            }\r\n          </div>\r\n          \r\n          <button className=\"btn btn-primary m-2\" onClick={reduxDims}>Redux Dims</button>\r\n        </div>\r\n        <hr/>\r\n        <div className=\"d-inline-flex\">\r\n          <button className=\"btn btn-primary m-2\" onClick={showGraph}>Scatter Plot</button>\r\n          <button className=\"btn btn-primary m-2\" onClick={showGraph2}>Scatter Plot Matrix</button>\r\n        </div>\r\n        {test ?\r\n            (<div className=\"w-75 mx-auto\"><ScatterPlotDiv data={uData}/></div>) : (null)\r\n          }\r\n          {test2 ?\r\n            (<div className=\"w-75 mx-auto\"><ScatterPlotMatrixDiv data={uData} dims={dims}/></div>) : (null)\r\n          }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}